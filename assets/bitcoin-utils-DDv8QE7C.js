import{s as e,e as t,B as r}from"./bitcoin-CpxUx-D2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),e.networks.bitcoin,e.initEccLib(t),window.Buffer=r;const o=e.networks.bitcoin;function n(t,n){const i=function(e){const t=e.startsWith("0x")?e.slice(2):e,o=r.from(t,"hex");return 33===o.length?o.slice(1,33):o}(n),s=function(t,o){if(!o||"string"!=typeof o)throw new Error("Missing or invalid publicKey");const n=e.script.number.encode(t),i=1===n.length&&n[0]<81?r.from([n[0]+80]):n;return e.script.compile([i,e.opcodes.OP_CHECKLOCKTIMEVERIFY,e.opcodes.OP_DROP,r.from(o,"hex"),e.opcodes.OP_CHECKSIG])}(t,n),c=e.payments.p2tr({internalPubkey:i,scriptTree:{output:s},network:o});return{address:c.address,internalPubkey:i.toString("hex"),leafScript:s.toString("hex"),controlBlock:c.witness?c.witness[1]:null}}async function i(){const e=await fetch("https://mempool.space/api/blocks/tip/height");if(!e.ok)throw new Error("Failed to fetch block height");return parseInt(await e.text(),10)}export{n as a,i as g};
